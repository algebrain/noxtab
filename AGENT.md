# AGENT.md

## Правила работы с файловой системой
- Для чтения и записи файлов используй Python, чтобы избежать проблем с кодировкой.
- Все текстовые файлы записывай в UTF-8 без BOM.
- По умолчанию поддерживай UTF-8 без BOM для исходников и документации.

## Правила скриншотов
- Скриншоты не перезаписываются, а создаются как новые файлы с нумерацией.
- Перед началом отладки убедись, что каталоги для скриншотов существуют.

## Надежный подход для Python-операций с файлами
- Всегда читать/писать текст явно с `encoding='utf-8'` и `newline='\n'`.
- Писать через временный файл и атомарную замену (`tmp -> replace`), если файл критичен.
- Перед перезаписью проверять, что целевой блок/строка действительно найдены; если нет - завершаться с ошибкой, а не писать вслепую.
- После записи делать быструю валидацию: файл существует, ключевые фрагменты на месте, синтаксис валиден (если применимо).
- Избегать хрупких one-liner со сложным экранированием; для больших правок использовать многострочный скрипт.
- Для путей использовать `pathlib.Path`, а не конкатенацию строк.
- Удаление/перезапись может быть запрещено правами: по умолчанию не рассчитывать на delete, предпочитать создание новых нумерованных файлов.
